(this.webpackJsonpremox=this.webpackJsonpremox||[]).push([[13],{1492:function(e,t,n){"use strict";var a=n(2),s=n(6);t.a=function(e){var t=e.children,n=e.onDisable,c=e.title,r=e.className,i=e.disableX,l=void 0!==i&&i;return Object(a.useEffect)((function(){return document.querySelector("body").style.overflowY="hidden",function(){document.querySelector("body").style.overflowY=""}}),[]),Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("div",{className:"w-full h-full !my-0 bg-white bg-opacity-60 absolute left-0 top-0 z-40",onClick:function(){return n(!1)},style:{top:"".concat(window.scrollY,"px")}}),Object(s.jsx)("div",{className:"absolute ".concat(r," overflow-auto max-h-[75vh]  left-1/2 -translate-x-1/2 -translate-y-1/2 bg-white w-[90%] sm:w-[60%] lg:w-auto lg:min-w-[33%] shadow-custom rounded-xl z-50"),style:{top:"".concat(window.scrollY+window.innerHeight/2,"px")},children:Object(s.jsxs)("div",{className:"relative px-5 py-10",children:[t,!!c&&Object(s.jsx)("div",{className:"absolute right-full top-2 font-bold translate-x-[105%] w-1/2",children:c}),!l&&Object(s.jsx)("button",{onClick:function(){return n(!1)},className:"absolute left-full top-0 translate-x-[-200%] translate-y-[25%] text-greylish opacity-45",children:"X"})]})})]})}},1630:function(e,t,n){"use strict";n.r(t);var a=n(34),s=n(21),c=n(3),r=n(18),i=n(1),l=n.n(i),o=n(212),u=n(29),d=n(2),x=n(28),b=n(122),j=n(64),m=n(87),p=n(243),f=n(244),h=n(101),v=n(1492),O=n(198),g=n(392),w=n(83),y=n(1605),N=n(67),k=n(1608),S=n(1495),A=n(1603),C=n(53);var F=n(6);t.default=function(){var e,t,n,i,T=Object(d.useState)(u.a.cUSD),E=Object(r.a)(T,2),D=E[0],M=E[1],U=Object(d.useState)(),I=Object(r.a)(U,2),L=I[0],B=I[1],R=Object(d.useState)(u.a.CELO),z=Object(r.a)(R,2),P=z[0],X=z[1],W=Object(g.a)().isMultisig,Y=Object(d.useRef)(null),_=Object(d.useState)("0"),q=Object(r.a)(_,2),V=q[0],H=q[1],J=Object(d.useState)(""),G=Object(r.a)(J,2),K=G[0],Q=G[1],Z=Object(d.useState)(""),$=Object(r.a)(Z,2),ee=$[0],te=$[1],ne=Object(d.useState)(!1),ae=Object(r.a)(ne,2),se=ae[0],ce=ae[1],re=Object(d.useState)(!1),ie=Object(r.a)(re,2),le=ie[0],oe=ie[1],ue=Object(d.useState)([{value:1,label:"0,1%",selected:!1},{value:5,label:"0,5%",selected:!0},{value:10,label:"1%",selected:!1},{value:0,label:"0%",selected:!1,invisible:!0}]),de=Object(r.a)(ue,2),xe=de[0],be=de[1],je=Object(d.useState)(1.5),me=Object(r.a)(je,2),pe=me[0],fe=me[1],he=Object(x.e)(b.a),ve=(Object(x.e)(j.c),Object(x.e)(m.g)),Oe=Object(x.e)(m.e),ge=Object(x.d)(),we=function(){var e=Object(N.useContractKit)(),t=e.kit,n=e.address,s=Object(d.useState)(!1),i=Object(r.a)(s,2),o=i[0],u=i[1],x=function(){var e=Object(c.a)(l.a.mark((function e(s,c,r,i,o){var d,x,b,j,m,p,f,h,v,O,g,w,N,F,T,E,D,M,U;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d=new y.a("https://forno.celo.org"),u(!0),e.prev=2,j=s.contractAddress,e.next=6,k.b.fetchTokenData(k.a.MAINNET,Object(A.getAddress)(j),d);case 6:return m=e.sent,p=c.contractAddress,e.next=10,k.b.fetchTokenData(k.a.MAINNET,Object(A.getAddress)(p),d);case 10:if(f=e.sent,s!=C.a.CELO){e.next=17;break}return e.next=14,t.contracts.getGoldToken();case 14:x=e.sent,e.next=27;break;case 17:if(s!==C.a.cUSD&&s!==C.a.cEUR&&s!==C.a.cREAL){e.next=23;break}return e.next=20,t.contracts.getStableToken(s.name);case 20:x=e.sent,e.next=27;break;case 23:return h=s.contractAddress,e.next=26,t.contracts.getErc20(h);case 26:x=e.sent;case 27:return v={ubeswapFactory:"0x62d5b84bE28a183aBB507E125B384122D2C25fAE",ubeswapRouter:"0xE3D8bd6Aed4F159bc8000a9cD47CffDb95F96121",ubeswapMoolaRouter:"0x7D28570135A2B1930F331c507F65039D4937f66c"},O=x.approve(v.ubeswapRouter,t.web3.utils.toWei(r,"ether")),e.next=31,O.send();case 31:return g=e.sent,e.next=34,g.waitReceipt();case 34:return w=new t.connection.web3.eth.Contract([{inputs:[{internalType:"uint256",name:"amountIn",type:"uint256"},{internalType:"uint256",name:"amountOutMin",type:"uint256"},{internalType:"address[]",name:"path",type:"address[]"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"deadline",type:"uint256"}],name:"swapExactTokensForTokens",outputs:[{internalType:"uint256[]",name:"amounts",type:"uint256[]"}],stateMutability:"nonpayable",type:"function"}],v.ubeswapRouter),e.next=37,k.b.fetchPairData(f,m,d);case 37:return N=e.sent,F=new k.e([N],m),T=S.utils.parseUnits(r,"ether"),E=new k.h(F,new k.g(m,T.toString()),k.i.EXACT_INPUT),D=k.f.swapCallParameters(E,{feeOnTransfer:!1,allowedSlippage:new k.d(i,"1000"),recipient:n,ttl:o}),e.next=44,(b=w.methods).swapExactTokensForTokens.apply(b,Object(a.a)(D.args));case 44:return M=e.sent,e.next=47,M.send({from:n});case 47:return U=e.sent,u(!1),e.abrupt("return",{hash:U.transactionHash});case 52:throw e.prev=52,e.t0=e.catch(2),new Error(e.t0);case 55:case"end":return e.stop()}}),e,null,[[2,52]])})));return function(t,n,a,s,c){return e.apply(this,arguments)}}(),b=function(){var e=Object(c.a)(l.a.mark((function e(n,a,s,c,r){var i,o,d,x,b,j,m,p,f,h,v,O,g,w,N,C,F,T,E,D,M;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(s),i=new y.a("https://forno.celo.org"),u(!0),o=0,e.prev=4,d=n.contractAddress,e.next=8,k.b.fetchTokenData(k.a.MAINNET,Object(A.getAddress)(d),i);case 8:return x=e.sent,b=a.contractAddress,e.next=12,k.b.fetchTokenData(k.a.MAINNET,Object(A.getAddress)(b),i);case 12:return j=e.sent,e.next=15,k.b.fetchPairData(j,x,i);case 15:return m=e.sent,p=new k.e([m],x),f="0",parseFloat(s)>0&&(h=S.utils.parseUnits(s,"ether"),v=new k.h(p,new k.g(x,h.toString()),k.i.EXACT_INPUT),O=new k.d(k.c.BigInt(30),k.c.BigInt(1e4)),g=new k.d(k.c.BigInt(1e4),k.c.BigInt(1e4)),w=g.subtract(O),N=v?g.subtract(v.route.pairs.reduce((function(e){return e.multiply(w)}),g)):void 0,(C=v&&N?v.priceImpact.subtract(N):void 0)&&new k.d(C.numerator,C.denominator),o=(o=N&&v&&new k.g(v.inputAmount.token,N.multiply(v.inputAmount.raw).quotient)).toSignificant(4),F=v.minimumAmountOut(new k.d(c.toString(),"1000")),f=F.raw.toString(),f=t.web3.utils.fromWei(f,"ether")),T=S.utils.parseUnits("1","ether"),E=new k.h(p,new k.g(x,T.toString()),k.i.EXACT_INPUT),D=E.minimumAmountOut(new k.d(c,"1000")),M=D.raw.toString(),M=t.web3.utils.fromWei(M,"ether"),u(!1),e.abrupt("return",{minimumAmountOut:f,oneTokenValue:M,feeAmount:o});case 28:throw e.prev=28,e.t0=e.catch(4),new Error(e.t0);case 31:case"end":return e.stop()}}),e,null,[[4,28]])})));return function(t,n,a,s,c){return e.apply(this,arguments)}}();return{Exchange:x,MinmumAmountOut:b,isLoading:o}}(),ye=we.Exchange,Ne=we.MinmumAmountOut,ke=we.isLoading,Se=function(){var e=Object(c.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!D.value||!P.value){e.next=13;break}return e.prev=1,e.next=4,Ne(u.a[D.name],u.a[P.name],(t||(null!==L&&void 0!==L?L:0)).toString(),xe.find((function(e){return e.selected})).value.toString(),Math.floor(60*pe));case 4:n=e.sent,H(n.minimumAmountOut),Q(n.feeAmount),te(n.oneTokenValue),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}(),Ae=function(){var e=Object(c.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(D.value&&P.value&&L&&L>0)){e.next=13;break}return e.prev=1,e.next=4,ye(u.a[D.name],u.a[P.name],L.toString(),xe.find((function(e){return e.selected})).value.toString(),Math.floor(60*pe));case 4:t=e.sent,ge(Object(m.c)({activate:!0,text:Object(F.jsxs)("div",{className:"flex flex-col items-center",children:[Object(F.jsx)("div",{className:"font-semobold text-xl",children:"Successfully Swapped"}),Object(F.jsx)("div",{className:"text-primary text-sm font-semibold",onClick:function(){return window.open("https://explorer.celo.org/tx/".concat(t.hash,"/token-transfers"),"_blank")},children:" View on Celo Explorer"})]})})),ce(!1),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0),ge(Object(m.a)({activate:!0}));case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}();Object(d.useEffect)((function(){D&&P&&Se()}),[D,P,L,xe]);var Ce=Object(O.a)(le,oe);return W?Object(F.jsx)("div",{className:"text-center py-2",children:"We are working on bringing Swap into MultiSig account. Please, select a wallet account until we finish it"}):Object(F.jsxs)("div",{className:"flex items-center justify-center",children:[Object(F.jsxs)("div",{className:"flex flex-col w-[50%]",children:[Object(F.jsxs)("div",{className:"shadow-custom rounded-xl bg-white pt-3 pb-10 px-3 flex flex-col space-y-1",children:[Object(F.jsxs)("div",{className:"flex justify-between",children:[Object(F.jsx)("div",{className:"font-bold font-xl pb-2",children:"Swap"}),Object(F.jsxs)("div",{className:"relative",children:[Object(F.jsx)("img",{src:"/icons/settings.svg",className:"cursor-pointer",onClick:function(){return oe(!le)}}),le&&Object(F.jsx)("div",{ref:Ce,className:"absolute z-[300] shadow-custom bg-white rounded-xl min-w-[250px] left-0 translate-x-[-90%] bottom-0 translate-y-full p-3 text-sm",children:Object(F.jsxs)("div",{className:"flex flex-col space-y-4",children:[Object(F.jsx)("div",{className:"font-bold",children:"Transaction Settings"}),Object(F.jsxs)("div",{className:"flex flex-col space-y-3",children:[Object(F.jsx)("div",{children:"Slippage tolerance"}),Object(F.jsxs)("div",{className:"flex space-x-1 px-2",children:[xe.filter((function(e){return!e.invisible})).map((function(e,t){return Object(F.jsx)("div",{onClick:function(){var e=Object(a.a)(xe);e.forEach((function(e){return e.selected=!1})),e[t].selected=!0,be(e)},className:"".concat(e.selected?"bg-primary bg-opacity-100 text-white":""," px-2 py-1 bg-greylish bg-opacity-10 cursor-pointer rounded-xl"),children:e.label},t)})),Object(F.jsxs)("div",{className:"bg-greylish bg-opacity-10 rounded-xl flex items-center pl-3 pr-5 space-x-1",children:[Object(F.jsx)("input",{placeholder:"0.5",type:"number",value:xe[xe.length-1].value/10||void 0,className:"outline-none text-right bg-transparent max-w-[50px] unvisibleArrow",min:0,step:"any",max:100,onChange:function(e){var t=e.target.value;parseFloat(t)>=0?be(xe.map((function(e,n){return n===xe.length-1?(e.selected=!0,e.value=Math.max(0,Math.min(100,parseFloat(t)))):e.selected=!1,e}))):t&&"0"!==t||be(xe.map((function(e,t){return t===xe.length-1?(e.selected=!1,e.value=0):e.selected=1==t,e})))}}),Object(F.jsx)("span",{children:"%"})]})]})]}),Object(F.jsxs)("div",{className:"flex flex-col space-y-3",children:[Object(F.jsx)("div",{children:"Transaction deadline"}),Object(F.jsxs)("div",{className:"flex space-x-1 px-2 items-center",children:[Object(F.jsx)("input",{type:"number",value:1.5===pe?void 0:pe,onChange:function(e){var t=e.target.value;fe(t?parseFloat(t):1.5)},className:"bg-greylish bg-opacity-10 rounded-xl py-1 w-[100px] outline-none px-2 text-right unvisibleArrow",placeholder:"1.5"}),Object(F.jsx)("div",{children:"minutes"})]})]})]})})]})]}),Object(F.jsxs)("div",{className:"bg-greylish bg-opacity-10 items-center flex justify-between rounded-md py-3 px-3",children:[Object(F.jsxs)("div",{className:"flex flex-col space-y-2 w-[130px]",children:[Object(F.jsx)("div",{children:Object(F.jsx)(o.a,{onChange:function(e,t){e.value===P.value&&X(t)},parentClass:"shadow-custom bg-white rounded-md",onSelect:M,className:"border-none py-1 space-x-4 text-sm",nameActivation:!0,selected:D,list:Object.values(u.a).map((function(e){return{name:e.name,type:e.value,value:e.value,coinUrl:e.coinUrl,feeName:e.feeName,id:e.value,className:"text-sm"}}))})}),Object(F.jsx)("div",{children:Object(F.jsx)("input",{ref:Y,onChange:function(){var e=Object(c.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return B(parseFloat(t.target.value)),e.next=3,Se(parseFloat(t.target.value));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),type:"number",className:"bg-transparent text-center outline-none unvisibleArrow max-w-[130px]",placeholder:"0",min:"0",step:"any"})})]}),Object(F.jsxs)("div",{className:"flex flex-col space-y-2 items-end",children:[Object(F.jsxs)("div",{children:["Balance: ",D&&D.name&&he[D.name]&&null!==(e=null===(t=he[D.name])||void 0===t?void 0:t.amount.toFixed(2))&&void 0!==e?e:0]}),Object(F.jsxs)("div",{className:"flex space-x-2",children:[Object(F.jsx)("button",{className:"shadow-custom bg-white px-2 py-1 rounded-xl text-xs",onClick:function(){if(he&&D&&he[D.name]&&he[D.name].amount>0){var e=.5*he[D.name].amount;Y.current.value=e.toFixed(2),B(e)}},children:"50%"}),Object(F.jsx)("button",{className:"shadow-custom bg-white px-2 py-1 rounded-xl text-xs",onClick:function(){if(he&&D&&he[D.name]&&he[D.name].amount>0){var e=he[D.name].amount;Y.current.value=e.toFixed(2),B(e)}},children:"MAX"})]})]})]}),Object(F.jsx)("div",{className:"flex items-center justify-center",children:Object(F.jsx)("div",{className:"bg-greylish bg-opacity-10 px-3 py-1 rounded-lg cursor-pointer",onClick:function(){var e=Object(s.a)({},D),t=Object(s.a)({},P),n=parseFloat(parseFloat(V).toFixed(2));M(t),X(e),B(n),Y.current&&(Y.current.value=n.toString())},children:Object(F.jsx)("img",{src:"/icons/arrowdown.svg",alt:""})})}),Object(F.jsxs)("div",{className:"flex bg-greylish bg-opacity-10 justify-between rounded-md py-3 px-3",children:[Object(F.jsxs)("div",{className:"flex flex-col space-y-2 w-[130px]",children:[Object(F.jsx)("div",{children:Object(F.jsx)(o.a,{onChange:function(e,t){e.value===D.value&&M(t)},parentClass:"shadow-custom bg-white rounded-md",onSelect:X,className:"border-none py-1 space-x-4 text-sm",nameActivation:!0,selected:P,list:Object.values(u.a).map((function(e){return{name:e.name,type:e.value,value:e.value,feeName:e.feeName,coinUrl:e.coinUrl,id:e.value,className:"text-sm"}}))})}),Object(F.jsx)("div",{children:!!L&&(ke?Object(F.jsx)("div",{className:"text-center",children:Object(F.jsx)(h.ClipLoader,{size:"24px"})}):Object(F.jsx)(F.Fragment,{children:Object(F.jsx)("div",{className:"text-center outline-none unvisibleArrow",children:parseFloat(V).toFixed(2)})}))})]}),Object(F.jsx)("div",{className:"flex flex-col items-end h-full",children:Object(F.jsxs)("div",{className:"text-right outline-none unvisibleArrow",children:["Balance: ",P&&P.name&&he[P.name]&&null!==(n=null===(i=he[P.name])||void 0===i?void 0:i.amount.toFixed(2))&&void 0!==n?n:0]})})]})]}),Object(F.jsxs)("div",{className:"px-8 py-3 font-extralight text-sm",children:[Object(F.jsxs)("div",{className:"flex justify-between",children:[Object(F.jsx)("div",{children:"Rate:"}),Object(F.jsxs)("div",{className:"flex",children:["1 ",D.name," = ",ke?Object(F.jsx)("div",{className:"px-3",children:Object(F.jsx)(h.ClipLoader,{size:18})}):parseFloat(ee).toFixed(2)," ",P.name]})]}),Object(F.jsxs)("div",{className:"flex justify-between",children:[Object(F.jsx)("div",{children:"Fee:"}),Object(F.jsxs)("div",{className:"flex",children:[ke?Object(F.jsxs)("div",{className:"px-3",children:[Object(F.jsx)(h.ClipLoader,{size:18})," "]}):K," ",D.name]})]})]}),Object(F.jsx)("div",{className:"text-center mx-8",children:Object(F.jsx)(w.a,{className:"w-full",onClick:function(){return ce(!0)},isLoading:ke,children:"Swap"})})]}),se&&Object(F.jsx)(v.a,{onDisable:ce,title:"Confirm Swap",className:"lg:left-[55.5%]",children:Object(F.jsxs)("div",{className:"flex flex-col -mx-5 space-y-5",children:[Object(F.jsxs)("div",{className:"flex flex-col py-2 pb-10 space-y-7 border-b-2 px-5",children:[Object(F.jsxs)("div",{className:"grid grid-cols-[7%,73%,20%] items-center",children:[Object(F.jsx)("div",{children:Object(F.jsx)("img",{src:"".concat(D.coinUrl),alt:"",className:"w-[20px[ h-[20px]"})}),Object(F.jsx)("div",{className:"font-bold",children:L}),Object(F.jsx)("div",{className:"text-right",children:D.name})]}),Object(F.jsx)("div",{className:"grid grid-cols-[7%,73%,20%] items-center",children:Object(F.jsx)("div",{children:Object(F.jsx)("img",{src:"/icons/longdown.svg",alt:""})})}),Object(F.jsxs)("div",{className:"grid grid-cols-[7%,73%,20%] items-center",children:[Object(F.jsx)("div",{children:Object(F.jsx)("img",{src:"".concat(P.coinUrl),className:"w-[20px[ h-[20px]",alt:""})}),Object(F.jsx)("div",{className:"font-bold",children:parseFloat(V).toFixed(2)}),Object(F.jsx)("div",{className:"text-right",children:P.name})]})]}),Object(F.jsxs)("div",{className:"flex flex-col px-5 text-xs space-y-1",children:[Object(F.jsxs)("div",{className:"flex justify-between",children:[Object(F.jsx)("div",{children:"Rate:"}),Object(F.jsxs)("div",{className:"flex",children:["1 ",D.name," = ",ke?Object(F.jsx)("div",{className:"px-3",children:Object(F.jsx)(h.ClipLoader,{size:18})}):parseFloat(ee).toFixed(2)," ",P.name]})]}),Object(F.jsxs)("div",{className:"flex justify-between",children:[Object(F.jsx)("div",{children:"Fee:"}),Object(F.jsxs)("div",{className:"flex",children:[ke?Object(F.jsxs)("div",{className:"px-3",children:[Object(F.jsx)(h.ClipLoader,{size:18})," "]}):K," ",D.name]})]})]}),Object(F.jsx)("div",{className:"flex justify-center",children:Object(F.jsx)(w.a,{className:"w-3/5",onClick:Ae,isLoading:ke,children:"Confirm Swap"})})]})}),ve&&Object(F.jsx)(p.a,{onClose:function(e){return ge(Object(m.c)({activate:e}))}}),Oe&&Object(F.jsx)(f.a,{onClose:function(e){return ge(Object(m.a)({activate:e}))}})]})}}}]);
//# sourceMappingURL=13.96207d46.chunk.js.map