(this.webpackJsonpremox=this.webpackJsonpremox||[]).push([[19],{1623:function(e,t,n){"use strict";n.r(t);var a=n(3),r=n(21),c=n(18),s=n(1),o=n.n(s),i=n(2),l=n(394),u=n(33),d=n(303),m=n.n(d),j=n(243),f=n(244),p=n(4),b=n(5),x={},v={};function O(e){return new Function("d","return {"+e.map((function(e,t){return JSON.stringify(e)+": d["+t+'] || ""'})).join(",")+"}")}function h(e){var t=Object.create(null),n=[];return e.forEach((function(e){for(var a in e)a in t||n.push(t[a]=a)})),n}function g(e,t){var n=e+"",a=n.length;return a<t?new Array(t-a+1).join(0)+n:n}function y(e){var t,n=e.getUTCHours(),a=e.getUTCMinutes(),r=e.getUTCSeconds(),c=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":((t=e.getUTCFullYear())<0?"-"+g(-t,6):t>9999?"+"+g(t,6):g(t,4))+"-"+g(e.getUTCMonth()+1,2)+"-"+g(e.getUTCDate(),2)+(c?"T"+g(n,2)+":"+g(a,2)+":"+g(r,2)+"."+g(c,3)+"Z":r?"T"+g(n,2)+":"+g(a,2)+":"+g(r,2)+"Z":a||n?"T"+g(n,2)+":"+g(a,2)+"Z":"")}var N=function(e){var t=new RegExp('["'+e+"\n\r]"),n=e.charCodeAt(0);function a(e,t){var a,r=[],c=e.length,s=0,o=0,i=c<=0,l=!1;function u(){if(i)return v;if(l)return l=!1,x;var t,a,r=s;if(34===e.charCodeAt(r)){for(;s++<c&&34!==e.charCodeAt(s)||34===e.charCodeAt(++s););return(t=s)>=c?i=!0:10===(a=e.charCodeAt(s++))?l=!0:13===a&&(l=!0,10===e.charCodeAt(s)&&++s),e.slice(r+1,t-1).replace(/""/g,'"')}for(;s<c;){if(10===(a=e.charCodeAt(t=s++)))l=!0;else if(13===a)l=!0,10===e.charCodeAt(s)&&++s;else if(a!==n)continue;return e.slice(r,t)}return i=!0,e.slice(r,c)}for(10===e.charCodeAt(c-1)&&--c,13===e.charCodeAt(c-1)&&--c;(a=u())!==v;){for(var d=[];a!==x&&a!==v;)d.push(a),a=u();t&&null==(d=t(d,o++))||r.push(d)}return r}function r(t,n){return t.map((function(t){return n.map((function(e){return s(t[e])})).join(e)}))}function c(t){return t.map(s).join(e)}function s(e){return null==e?"":e instanceof Date?y(e):t.test(e+="")?'"'+e.replace(/"/g,'""')+'"':e}return{parse:function(e,t){var n,r,c=a(e,(function(e,a){if(n)return n(e,a-1);r=e,n=t?function(e,t){var n=O(e);return function(a,r){return t(n(a),r,e)}}(e,t):O(e)}));return c.columns=r||[],c},parseRows:a,format:function(t,n){return null==n&&(n=h(t)),[n.map(s).join(e)].concat(r(t,n)).join("\n")},formatBody:function(e,t){return null==t&&(t=h(e)),r(e,t).join("\n")},formatRows:function(e){return e.map(c).join("\n")},formatRow:c,formatValue:s}},w=N(","),k=w.parse,C=(w.parseRows,w.format,w.formatBody,w.formatRows,w.formatRow,w.formatValue,N("\t")),A=C.parse;C.parseRows,C.format,C.formatBody,C.formatRows,C.formatRow,C.formatValue;function U(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.text()}var S=function(e,t){return fetch(e,t).then(U)};function T(e){return function(t,n,a){return 2===arguments.length&&"function"===typeof n&&(a=n,n=void 0),S(t,n).then((function(t){return e(t,a)}))}}var R=T(k),P=(T(A),function(){function e(){Object(p.a)(this,e)}return Object(b.a)(e,null,[{key:"Import",value:function(){var e=Object(a.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(a.a)(o.a.mark((function e(n,a){var r,c,s,i,l,u;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=URL.createObjectURL(t),e.next=3,R(r);case 3:if(c=e.sent)if(c.columns[0].toLowerCase().includes("name;address;amount;coin;amount2;coin2")){for(s=[],i=0;i<c.length;i++)(u=null===(l=Object.values(c[i])[0])||void 0===l?void 0:l.split(";"))&&u.length>0?s.push(u):a(new Error("Row is null"));n(s)}else a(new Error("Columns are invalid. Please, set the column order like that: Name Address Amount Coin"));else a(new Error("Cannot import an empty file"));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}()),D=P,E=n(28),F=n(64),L=n(34),I=n(1521),V=n(101),_=n(29),B=n(212),q=n(6),M=function(e){var t,n,a=e.index,r=e.name,s=e.address,o=e.selectedWallet,l=e.setWallet,u=e.setIndex,d=e.overallIndex,m=e.amount,j=e.uniqueArr,f=e.isBasedOnDollar,p=e.setAmount,b=e.amountState,x=Object(i.useState)(!1),v=Object(c.a)(x,2),O=v[0],h=v[1];return Object(i.useEffect)((function(){if(!o[a]&&!o[a+1]){var e=Object.values(_.a).map((function(e){return{name:e.name,type:e.value,coinUrl:e.coinUrl,value:e.value}}))[0];l([].concat(Object(L.a)(o),[e,e]))}}),[]),Object(q.jsxs)(q.Fragment,{children:[Object(q.jsx)("input",{className:"col-span-2 sm:col-span-1 border text-black px-3 py-1 rounded-md",placeholder:"Name",defaultValue:r[a],type:"text",name:"name__".concat(a),onChange:function(e){r[a]=e.target.value,r[a+1]=e.target.value}})," ",Object(q.jsx)("input",{className:"col-span-2 sm:col-span-1 border text-black px-3 py-1 rounded-md",placeholder:"Address",defaultValue:s[a],type:"text",name:"address__".concat(a),onChange:function(e){s[a]=e.target.value,s[a+1]=e.target.value},required:!0})," ",Object(q.jsxs)("div",{className:"col-span-3 sm:col-span-1 border text-black py-1 rounded-md grid ".concat(f?"grid-cols-[40%,15%,45%]":"grid-cols-[50%,50%]"),children:[Object(q.jsx)("input",{className:"outline-none unvisibleArrow pl-2",placeholder:"Amount",defaultValue:m[a],type:"number",name:"amount__".concat(a),onChange:function(e){m[a]=e.target.value;var t=Object(L.a)(b);t[a]=Number(e.target.value),p(t)},required:!0,step:"any",min:0}),f&&Object(q.jsx)("span",{className:"text-xs self-center opacity-70",children:"USD as"}),o?Object(q.jsx)(B.a,{className:"border-transparent text-sm",onSelect:function(e){var t=Object(L.a)(o);t[a]=e,l(t)},nameActivation:!0,selected:null!==(t=o[a])&&void 0!==t?t:Object.values(_.a).map((function(e){return{name:e.name,type:e.value,coinUrl:e.coinUrl,value:e.value}}))[0],list:Object.values(_.a).map((function(e){return{name:e.name,type:e.value,coinUrl:e.coinUrl,value:e.value}}))}):Object(q.jsx)(V.ClipLoader,{})]}),Object(q.jsx)("div",{className:"flex items-center",children:d>1&&Object(q.jsx)(I.a,{className:"text-red-500 cursor-pointer",onClick:function(){r.splice(a,2),s.splice(a,2),m.splice(a,2),j.splice(a,2),l(Object(L.a)(o.filter((function(e,t){return t!==a&&t!==a+1})))),u(d-1)}})}),Object(q.jsx)("div",{}),Object(q.jsx)("div",{}),O?Object(q.jsxs)("div",{className:"col-span-3 sm:col-span-1 border text-black py-1 rounded-md grid ".concat(f?"grid-cols-[40%,15%,45%]":"grid-cols-[50%,50%]"),children:[Object(q.jsx)("input",{className:"outline-none unvisibleArrow pl-2",placeholder:"Amount",defaultValue:m[a+1],type:"number",name:"amount__".concat(a+1),onChange:function(e){m[a+1]=e.target.value;var t=Object(L.a)(b);t[a+1]=Number(e.target.value),p(t)},step:"any",min:0}),f&&Object(q.jsx)("span",{className:"text-xs self-center opacity-70",children:"USD as"}),o?Object(q.jsx)(B.a,{className:"border-transparent text-sm",onSelect:function(e){var t=Object(L.a)(o);t[a+1]=e,l(t)},nameActivation:!0,selected:null!==(n=o[a+1])&&void 0!==n?n:Object.values(_.a).map((function(e){return{name:e.name,type:e.value,coinUrl:e.coinUrl,value:e.value}}))[0],list:Object.values(_.a).map((function(e){return{name:e.name,type:e.value,coinUrl:e.coinUrl,value:e.value}}))}):Object(q.jsx)(V.ClipLoader,{})]}):Object(q.jsx)("div",{className:"text-primary text-sm cursor-pointer",onClick:function(){return h(!0)},children:"+ Add another token"}),Object(q.jsx)("div",{}),Object(q.jsx)("div",{}),Object(q.jsx)("div",{}),Object(q.jsx)("div",{}),Object(q.jsx)("div",{className:"mt-5"})]})},W=n(58),J=n(87),Z=n(88),H=n(122),Y=n(83),$=n(699),z=n(281);t.default=function(){var e=Object(E.e)(F.c),t=Object(E.e)(Z.a),n=Object(E.e)(J.e),s=Object(W.a)(),d=Object(u.h)(),p=Object(E.e)(H.a),b=Object($.a)(),x=b.BatchPay,v=b.Pay,O=Object(z.a)().submitTransaction,h=Object(i.useState)(1),g=Object(c.a)(h,2),y=g[0],N=g[1],w=Object(i.useState)(!1),k=Object(c.a)(w,2),C=k[0],A=k[1],U=Object(i.useState)(!1),S=Object(c.a)(U,2),T=S[0],R=S[1],P=Object(i.useState)(!1),L=Object(c.a)(P,2),I=L[0],V=L[1],B=Object(i.useState)([]),G=Object(c.a)(B,2),K=G[0],Q=G[1],X=Object(i.useRef)([Object(l.generate)(),Object(l.generate)()]),ee=Object(i.useRef)([]),te=Object(i.useRef)([]),ne=Object(i.useState)([]),ae=Object(c.a)(ne,2),re=ae[0],ce=ae[1],se=Object(i.useRef)([]),oe=Object(i.useState)([]),ie=Object(c.a)(oe,2),le=ie[0],ue=ie[1],de=Object(i.useRef)(null),me=Object(i.useState)(),je=Object(c.a)(me,2),fe=je[0],pe=je[1],be=Object(i.useState)([]),xe=Object(c.a)(be,2),ve=(xe[0],xe[1]);Object(i.useEffect)((function(){if(le.length>0){var e=le.filter((function(e){return e[1]&&e[2]&&e[3]&&e[4]&&e[5]}));ee.current=[],te.current=[],se.current=[],X.current=[];for(var t=[],n=[],a=0;a<e.length;a++){var s=e[a].slice(0,6),o=Object(c.a)(s,6),i=o[0],u=o[1],d=o[2],m=o[3],j=o[4],f=o[5];X.current.push(Object(l.generate)()),X.current.push(Object(l.generate)()),ee.current.push(i||""),te.current.push(u||""),se.current.push(d||""),n.push(parseFloat(d||"0")),ee.current.push(i||""),te.current.push(u||""),se.current.push(j||""),n.push(parseFloat(j||"0"));var p=[Object(r.a)(Object(r.a)({},_.a[m]),{},{type:_.a[m].value}),Object(r.a)(Object(r.a)({},_.a[f]),{},{type:_.a[f].value})];t.push.apply(t,p),Q(n)}N((1===y?0:y)+e.length),ce(t),de.current.files=(new DataTransfer).files}}),[le]),Object(i.useEffect)((function(){if(p&&p.CELO){var e=Object.values(p).map((function(e){return{name:"".concat(e.amount.toFixed(3)," ").concat(e.coins.name),type:e.coins.value.toString(),amount:e.amount.toString(),coinUrl:e.coins.coinUrl}})),t={name:e[0].name.split(" ")[1],coinUrl:e[0].coinUrl,type:e[0].type};ce([Object(r.a)({},t),Object(r.a)({},t)]),pe(e[0]),ve(e)}}),[p]);var Oe=function(){var n=Object(a.a)(o.a.mark((function n(a){var r,c,i,l,u,d,m,j,f,b,h,g,y;return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:for(a.preventDefault(),A(!0),n.prev=2,r=[],c=[ee.current,te.current,se.current],c[0],i=c[1],l=c[2],u=0;u<i.length;u++)i[u]&&l[u]&&re[u].type&&(d=l[u],I&&(f=null!==(m=null===(j=p[re[u].name])||void 0===j?void 0:j.tokenPrice)&&void 0!==m?m:1,d=(parseFloat(d)/f).toFixed(4)),r.push({toAddress:i[u],amount:d,tokenName:re[u].name}));if(e.accountAddress.toLowerCase()!==t.toLowerCase()){n.next=18;break}if(1!==r.length||!fe||!fe.name){n.next=12;break}return n.next=10,v({coin:_.a[r[0].tokenName],recipient:r[0].toAddress,amount:r[0].amount});case 10:n.next=16;break;case 12:if(!(r.length>1)){n.next=16;break}return b=r.map((function(e){return{coin:_.a[e.tokenName],recipient:e.toAddress,amount:e.amount}})),n.next=16,x(b);case 16:n.next=32;break;case 18:if(1!==r.length||!fe||!fe.name){n.next=23;break}return n.next=21,O(t,r[0].toAddress,r[0].amount,_.a[r[0].tokenName]);case 21:n.next=32;break;case 23:if(!(r.length>1)){n.next=32;break}h=r.map((function(e){return{coin:_.a[e.tokenName],recipient:e.toAddress,amount:e.amount}})),g=0;case 26:if(!(g<h.length)){n.next=32;break}return n.next=29,O(t,r[g].toAddress,r[g].amount,_.a[r[g].tokenName]);case 29:g++,n.next=26;break;case 32:R(!0),n.next=39;break;case 35:n.prev=35,n.t0=n.catch(2),console.error(n.t0),s(Object(J.a)({activate:!0,text:null===n.t0||void 0===n.t0||null===(y=n.t0.data)||void 0===y?void 0:y.message.slice(0,80)}));case 39:A(!1);case 40:case"end":return n.stop()}}),n,null,[[2,35]])})));return function(e){return n.apply(this,arguments)}}();return Object(q.jsxs)("div",{className:"sm:px-32",children:[Object(q.jsx)("form",{onSubmit:Oe,children:Object(q.jsx)("div",{className:"sm:flex flex-col items-center justify-center min-h-screen",children:Object(q.jsxs)("div",{className:"sm:min-w-[85vw] min-h-[75vh] h-auto ",children:[Object(q.jsx)("div",{className:"pl-14 py-2 text-left w-full",children:Object(q.jsx)("div",{className:"text-xl font-semibold",children:"Pay Someone"})}),Object(q.jsxs)("div",{className:"shadow-xl border sm:flex flex-col gap-3 gap-y-10 sm:gap-10 py-10",children:[Object(q.jsxs)("div",{className:"sm:flex flex-col pl-3 sm:pl-12 sm:pr-[20%] gap-3 gap-y-10  sm:gap-10",children:[Object(q.jsxs)("div",{className:"flex flex-col space-y-5",children:[Object(q.jsx)("span",{className:"text-left text-sm font-semibold",children:"Payment Type"}),Object(q.jsxs)("div",{className:"flex space-x-24",children:[Object(q.jsxs)("div",{className:"flex space-x-2 items-center",children:[Object(q.jsx)("input",{type:"radio",className:"w-4 h-4 accent-[#ff501a] cursor-pointer",name:"paymentType",value:"token",onChange:function(e){return V(!1)},checked:!I}),Object(q.jsx)("label",{className:"font-semibold text-sm",children:"Pay with Token Amounts"})]}),Object(q.jsxs)("div",{className:"flex space-x-2 items-center",children:[Object(q.jsx)("input",{type:"radio",className:"w-4 h-4 accent-[#ff501a] cursor-pointer",name:"paymentType",value:"fiat",onChange:function(e){return V(!0)},checked:I}),Object(q.jsx)("label",{className:"font-semibold text-sm",children:"Pay with USD-based Amounts"})]})]})]}),Object(q.jsxs)("div",{className:"flex flex-col",children:[Object(q.jsxs)("div",{className:"flex space-x-5 sm:space-x-0 sm:justify-between py-4 items-center",children:[Object(q.jsx)("span",{className:"text-left font-semibold text-sm",children:"Paying To"}),Object(q.jsx)("input",{ref:de,type:"file",className:"hidden",onChange:function(e){return e.target.files.length>0?D.Import(e.target.files[0]).then((function(e){return ue(e)})).catch((function(e){return console.error(e)})):null}})]}),Object(q.jsx)("div",{className:"grid grid-cols-4 sm:grid-cols-[25%,35%,35%,5%] gap-5",children:re.length>0&&y?Array(y).fill(" ").map((function(e,t){return X.current[2*t]||(X.current[2*t]=Object(l.generate)(),X.current[2*t+1]=Object(l.generate)()),Object(q.jsx)(M,{amountState:K,setAmount:Q,setIndex:N,overallIndex:y,uniqueArr:X.current,index:2*t,name:ee.current,address:te.current,amount:se.current,selectedWallet:re,setWallet:ce,isBasedOnDollar:I},X.current[2*t])})):Object(q.jsx)("div",{children:Object(q.jsx)(m.a,{})})})]}),Object(q.jsxs)("div",{className:"py-5 sm:py-0 grid grid-cols-[65%,35%] gap-16",children:[Object(q.jsxs)("div",{className:"grid grid-cols-2 gap-x-5 sm:grid-cols-3",children:[Object(q.jsx)(Y.a,{version:"second",className:"min-w-[200px]",onClick:function(){N(y+1)},children:"+ Add More"}),Object(q.jsx)(Y.a,{version:"second",onClick:function(){var e;null===(e=de.current)||void 0===e||e.click()},className:"min-w-[200px]",children:"Import CSV"})]}),Object(q.jsxs)("span",{className:"self-center text-lg opacity-60",children:["Total: $",K.reduce((function(e,t,n){var a,r,c;return null!==(a=re[n])&&void 0!==a&&a.type?I?e+t:e+t*(null!==(r=null===(c=p[re[n].name])||void 0===c?void 0:c.tokenPrice)&&void 0!==r?r:1):e}),0).toFixed(2)]})]}),Object(q.jsxs)("div",{className:"flex flex-col",children:[Object(q.jsx)("span",{className:"text-left",children:"Description (Optional)"}),Object(q.jsx)("div",{className:"grid grid-cols-1",children:Object(q.jsx)("textarea",{className:"border-2 rounded-xl p-1 outline-none",name:"description",id:"",cols:30,rows:5})})]})]}),Object(q.jsx)("div",{className:"flex justify-center pt-5 sm:pt-0",children:Object(q.jsxs)("div",{className:"flex flex-col-reverse sm:grid grid-cols-2 w-[200px] sm:w-[400px] justify-center gap-5",children:[Object(q.jsx)(Y.a,{version:"second",onClick:function(){return d(-1)},children:"Close"}),Object(q.jsx)(Y.a,{type:"submit",className:"bg-primary px-3 py-2 text-white flex items-center justify-center rounded-lg",isLoading:C,children:"Pay"})]})})]})]})})}),T&&Object(q.jsx)(j.a,{onClose:R,onAction:function(){d(-1)}}),n&&Object(q.jsx)(f.a,{onClose:function(e){return s(Object(J.a)({activate:e,text:""}))}})]})}}}]);
//# sourceMappingURL=19.e8442d53.chunk.js.map